{"remainingRequest":"/home/shaokai/shixiongProject/shixiongtest/mangesystem2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/shaokai/shixiongProject/shixiongtest/mangesystem2/src/views/display/components/Map.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/shaokai/shixiongProject/shixiongtest/mangesystem2/src/views/display/components/Map.vue","mtime":1677684504071},{"path":"/home/shaokai/shixiongProject/shixiongtest/mangesystem2/node_modules/cache-loader/dist/cjs.js","mtime":1677684502691},{"path":"/home/shaokai/shixiongProject/shixiongtest/mangesystem2/node_modules/babel-loader/lib/index.js","mtime":1677684502627},{"path":"/home/shaokai/shixiongProject/shixiongtest/mangesystem2/node_modules/cache-loader/dist/cjs.js","mtime":1677684502691},{"path":"/home/shaokai/shixiongProject/shixiongtest/mangesystem2/node_modules/vue-loader/lib/index.js","mtime":1677684503939}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpsZXQgbWFwPW51bGwKbGV0IGxheWVyID0gbnVsbApleHBvcnQgZGVmYXVsdCB7CiAgICBjb21wb25lbnRzOiB7IAogICAgICAgIC8vICAgZGF0ZXBpY2tlciAKICAgIH0sCiAgICBkYXRhKCl7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICBtYXA6IG51bGwsCiAgICAgICAgICAgIGxheWVyczogbnVsbCwKICAgICAgICAgICAgbWFwSWQ6ICdtYXBib3gvc3RyZWV0cy12MTEnLAogICAgICAgICAgICBnZW9Mb2NhdGU6bnVsbCwKICAgICAgICAgICAgdXNlckxvY2F0aW9uOltdLAogICAgICAgICAgICBjYW52YXNNYXJrZXJzOiBbXSwKICAgICAgICAgICAgc2l6ZTogewogICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsCiAgICAgICAgICAgICAgaGVpZ2h0OiAnOC4ycmVtJywKICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnd2hpdGVzbW9rZScsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIAogICAgICAgICAgICBkZXBvdEljb246IG51bGwsCiAgICAgICAgICAgICAgICB1c2VySWNvbjogbnVsbCwKICAgICAgICAgICAgICAgIHVhdkljb246IG51bGwsCiAgICAgICAgfQogICAgfSwgCiAgICBtb3VudGVkKCkgewogICAgICAgIC8vIOWIm+W7uuWcsOWbvuWxggogICAgICAgIHRoaXMubWFwID0gdGhpcy4kbGVhZmxldC5jcmVhdGVNYXAoIm1hcC1jb250YWluZXIiLCB7CiAgICAgICAgICAgIG1pblpvb206IDEsCiAgICAgICAgICAgIG1heFpvb206IDIwLAogICAgICAgICAgICB6b29tQ29udHJvbDogZmFsc2UsCiAgICAgICAgICAgIGF0dHJpYnV0aW9uQ29udHJvbDogZmFsc2UsCiAgICAgICAgICAgIC8v5Z2Q5qCH57O76YCJ5oupCiAgICAgICAgICAgIGNyczogTC5DUlMuRVBTRzM4NTcKICAgICAgICB9KS5maXRXb3JsZCgpCgogICAgICAgIHRoaXMubGF5ZXJzID0gdGhpcy4kbGVhZmxldC5jcmVhdGVUaWxlTGF5ZXIodGhpcy5tYXAsICdodHRwczovL2FwaS5tYXBib3guY29tL3N0eWxlcy92MS97aWR9L3RpbGVzL3t6fS97eH0ve3l9P2FjY2Vzc190b2tlbj17YWNjZXNzVG9rZW59JywgewogICAgICAgICAgICAvLyBhdHRyaWJ1dGlvbjogJ01hcCBkYXRhICZjb3B5OyA8YSBocmVmPSJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHQiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgSW1hZ2VyeSDCqSA8YSBocmVmPSJodHRwczovL3d3dy5tYXBib3guY29tLyI+TWFwYm94PC9hPicsCiAgICAgICAgICAgIG1heFpvb206IDIwLAogICAgICAgICAgICBpZDogdGhpcy5tYXBJZCwKICAgICAgICAgICAgdGlsZVNpemU6IDUxMiwKICAgICAgICAgICAgem9vbU9mZnNldDogLTEsCiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiAncGsuZXlKMUlqb2lkSEpoYm5OalpXNWtkSEpsWlNJc0ltRWlPaUpqYTNONmVIUmlNemt4ZVhOek1tOTBZMlJoZDJKbWJqTnFJbjAuYkNSdjd4QjU1akhTRHdFRjV5NURjQScKICAgICAgICB9KQogICAgICAgIC8vIHRoaXMubWFwLnNldFZpZXcoWzUxLjUwNSwgLTAuMDldLCAxMyk7CiAgICAgICAgdGhpcy4kbGVhZmxldC56b29tQ29udHJvbCh7IHBvc2l0aW9uOiAndG9wcmlnaHQnIH0pLmFkZFRvKHRoaXMubWFwKQogICAgICAgIHRoaXMuJGxlYWZsZXQuem9vbUF0dHJpYnV0aW9uKAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbXJpZ2h0JywKICAgICAgICAgICAgICAgIHByZWZpeDogJ01hcCBkYXRhICZjb3B5OyA8YSBocmVmPSJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHQiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgSW1hZ2VyeSDCqSA8YSBocmVmPSJodHRwczovL3d3dy5tYXBib3guY29tLyI+TWFwYm94PC9hPicKICAgICAgICAgICAgfQogICAgICAgICkKICAgICAgICAvLyDlrprkvY0KICAgICAgICB0aGlzLiRsZWFmbGV0LmxvY2F0ZSh7IHBvc2l0aW9uOiAnYm90dG9tcmlnaHQnLCBpbml0aWFsWm9vbUxldmVsOiAxNSwgc2V0VmlldzogIm9uY2UiLCBmbHlUbzogdHJ1ZX0pLmFkZFRvKHRoaXMubWFwKTsKICAgICAgICAvLyB0aGlzLm1hcC5vbignY2xpY2snLCBlID0+ewogICAgICAgIC8vICAgY29uc29sZS5sb2coZSkKICAgICAgICAvLyB9KQogICAgICAgIC8vIOWIneWni+WMlkljb24KICAgICAgICB0aGlzLmljb25Jbml0KCkKICAgICAgICB0aGlzLnF1ZXJ5TGF0bG5nKCkKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLy8gaWNvbiBpbml0CiAgICAgICAgYXN5bmMgaWNvbkluaXQoKSB7CiAgICAgICAgICAgIHRoaXMudXNlckljb24gPSB0aGlzLiRsZWFmbGV0LmNyZWF0ZUljb24oewogICAgICAgICAgICAgICAgaWNvblVybDogcmVxdWlyZSgiQC9hc3NldHMvaWNvbnMvZmx5SWNvbi9tb2JpbGUucG5nIiksCiAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzM2LCAzNl0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgdGhpcy5kZXBvdEljb24gPSB0aGlzLiRsZWFmbGV0LmNyZWF0ZUljb24oewogICAgICAgICAgICAgICAgaWNvblVybDogcmVxdWlyZSgiQC9hc3NldHMvaWNvbnMvZmx5SWNvbi9kZXBvdC5wbmciKSwKICAgICAgICAgICAgICAgIGljb25TaXplOiBbMzYsIDM2XQogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLnVhdkljb24gPSB0aGlzLiRsZWFmbGV0LmNyZWF0ZUljb24oewogICAgICAgICAgICAgICAgaWNvblVybDogcmVxdWlyZSgiQC9hc3NldHMvaWNvbnMvZmx5SWNvbi91YXY0OC5wbmciKSwKICAgICAgICAgICAgICAgIGljb25TaXplOiBbMzYsIDM2XQogICAgICAgICAgICB9KQogICAgICAgICAgICAKICAgICAgICB9LAogICAgICAgIC8vIOWcsOWbvuagt+W8j+aUueWPmAogICAgICAgIGNoYW5nZVN0eWxlKCkgewogICAgICAgICAgICB0aGlzLm1hcC5yZW1vdmVMYXllcih0aGlzLmxheWVycykKICAgICAgICAgICAgdGhpcy4kbGVhZmxldC5jcmVhdGVUaWxlTGF5ZXIodGhpcy5tYXAsICdodHRwczovL2FwaS5tYXBib3guY29tL3N0eWxlcy92MS97aWR9L3RpbGVzL3t6fS97eH0ve3l9P2FjY2Vzc190b2tlbj17YWNjZXNzVG9rZW59JywgewogICAgICAgICAgICAgICAgYXR0cmlidXRpb246ICdNYXAgZGF0YSAmY29weTsgd2EgaHJlZj0iaHR0cHM6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0IndPcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsIEltYWdlcnkgwqkgPGEgaHJlZj0iaHR0cHM6Ly93d3cubWFwYm94LmNvbS8iPk1hcGJveDwvYT4nLAogICAgICAgICAgICAgICAgbWF4Wm9vbTogMjAsCiAgICAgICAgICAgICAgICBpZDogdGhpcy5tYXBJZCwKICAgICAgICAgICAgICAgIHRpbGVTaXplOiA1MTIsCiAgICAgICAgICAgICAgICAvLyB6b29tT2Zmc2V0IOazqOmHiuaOieS8muWHuuWkp+mXrumimAogICAgICAgICAgICAgICAgem9vbU9mZnNldDogLTEsCiAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogJ3BrLmV5SjFJam9pZEhKaGJuTmpaVzVrZEhKbFpTSXNJbUVpT2lKamEzTjZlSFJpTXpreGVYTnpNbTkwWTJSaGQySm1iak5xSW4wLmJDUnY3eEI1NWpIU0R3RUY1eTVEY0EnCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICAvLyDojrflj5blnZDmoIcKICAgICAgICBxdWVyeUxhdGxuZygpewogICAgICAgICAgbGV0IGxhdGxuZyA9IHsKICAgICAgICAgICAgbGF0OiAzOS4wODM0MzIwODA2NzU1OCwKICAgICAgICAgICAgbG5nOiAxMjEuODEwNjExMTY5Nzg1MjgKICAgICAgICAgIH0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGxhdGxuZykKICAgICAgICAgIHRoaXMuZHJhd1VhdihsYXRsbmcpCiAgICAgICAgfSwKICAgICAgICAvLyDkvKDlhaXlnZDmoIcs57uY5Yi25peg5Lq65py6CiAgICAgICAgZHJhd1VhdihsYXRsbmcpewogICAgICAgICAgCiAgICAgICAgICB0aGlzLiRsZWFmbGV0LmNyZWF0ZU1hcmtlcihsYXRsbmcsIHsgaWNvbjogdGhpcy51YXZJY29uLCB0aXRsZTogIuaXoOS6uuacuuato+WcqOaJp+ihjOS7u+WKoSIgfSkuYWRkVG8odGhpcy5tYXApCiAgICAgICAgfQoKICAgIH0KfQo="},{"version":3,"sources":["Map.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA","file":"Map.vue","sourceRoot":"src/views/display/components","sourcesContent":["<template>\n\n  <div id=\"mapsetting\" :style=\"size\">\n  <!-- <div -->\n  <!-- <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.4.0/dist/leaflet.css\"/> -->\n\n    <!-- <el-radio-group class=\"mapStyle\" v-model=\"mapId\" @change=\"changeStyle\" size=\"mini\">\n      <el-radio-button label='mapbox/streets-v11' size=\"mini\" >平面地图</el-radio-button>\n      <el-radio-button label='mapbox/satellite-v9' size=\"mini\" >卫星地图</el-radio-button>\n      <el-radio-button label='mapbox/outdoors-v10' size=\"mini\" >户外地图</el-radio-button>\n    </el-radio-group> -->\n\n    <!-- <div id=\"map\"></div> -->\n    <div class=\"map-container\" id=\"map-container\"> </div>\n  </div>\n\n  \n\n</template>\n\n<script>\n\nlet map=null\nlet layer = null\nexport default {\n    components: { \n        //   datepicker \n    },\n    data(){\n        return{\n            map: null,\n            layers: null,\n            mapId: 'mapbox/streets-v11',\n            geoLocate:null,\n            userLocation:[],\n            canvasMarkers: [],\n            size: {\n              width: '100%',\n              height: '8.2rem',\n              background: 'whitesmoke',\n            },\n            \n            depotIcon: null,\n                userIcon: null,\n                uavIcon: null,\n        }\n    }, \n    mounted() {\n        // 创建地图层\n        this.map = this.$leaflet.createMap(\"map-container\", {\n            minZoom: 1,\n            maxZoom: 20,\n            zoomControl: false,\n            attributionControl: false,\n            //坐标系选择\n            crs: L.CRS.EPSG3857\n        }).fitWorld()\n\n        this.layers = this.$leaflet.createTileLayer(this.map, 'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {\n            // attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n            maxZoom: 20,\n            id: this.mapId,\n            tileSize: 512,\n            zoomOffset: -1,\n            accessToken: 'pk.eyJ1IjoidHJhbnNjZW5kdHJlZSIsImEiOiJja3N6eHRiMzkxeXNzMm90Y2Rhd2JmbjNqIn0.bCRv7xB55jHSDwEF5y5DcA'\n        })\n        // this.map.setView([51.505, -0.09], 13);\n        this.$leaflet.zoomControl({ position: 'topright' }).addTo(this.map)\n        this.$leaflet.zoomAttribution(\n            {\n                position: 'bottomright',\n                prefix: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>'\n            }\n        )\n        // 定位\n        this.$leaflet.locate({ position: 'bottomright', initialZoomLevel: 15, setView: \"once\", flyTo: true}).addTo(this.map);\n        // this.map.on('click', e =>{\n        //   console.log(e)\n        // })\n        // 初始化Icon\n        this.iconInit()\n        this.queryLatlng()\n    },\n    methods: {\n        // icon init\n        async iconInit() {\n            this.userIcon = this.$leaflet.createIcon({\n                iconUrl: require(\"@/assets/icons/flyIcon/mobile.png\"),\n                iconSize: [36, 36]\n            })\n            this.depotIcon = this.$leaflet.createIcon({\n                iconUrl: require(\"@/assets/icons/flyIcon/depot.png\"),\n                iconSize: [36, 36]\n            })\n            this.uavIcon = this.$leaflet.createIcon({\n                iconUrl: require(\"@/assets/icons/flyIcon/uav48.png\"),\n                iconSize: [36, 36]\n            })\n            \n        },\n        // 地图样式改变\n        changeStyle() {\n            this.map.removeLayer(this.layers)\n            this.$leaflet.createTileLayer(this.map, 'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {\n                attribution: 'Map data &copy; wa href=\"https://www.openstreetmap.org/copyright\"wOpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n                maxZoom: 20,\n                id: this.mapId,\n                tileSize: 512,\n                // zoomOffset 注释掉会出大问题\n                zoomOffset: -1,\n                accessToken: 'pk.eyJ1IjoidHJhbnNjZW5kdHJlZSIsImEiOiJja3N6eHRiMzkxeXNzMm90Y2Rhd2JmbjNqIn0.bCRv7xB55jHSDwEF5y5DcA'\n            })\n        },\n        // 获取坐标\n        queryLatlng(){\n          let latlng = {\n            lat: 39.08343208067558,\n            lng: 121.81061116978528\n          }\n          // console.log(latlng)\n          this.drawUav(latlng)\n        },\n        // 传入坐标,绘制无人机\n        drawUav(latlng){\n          \n          this.$leaflet.createMarker(latlng, { icon: this.uavIcon, title: \"无人机正在执行任务\" }).addTo(this.map)\n        }\n\n    }\n}\n</script>\n\n<style scoped>\n#map {\n  height: 100%;\n  width: 100%;\n  z-index: auto;\n  background: bisque;\n  /*background-color: #409EFF;*/\n}\n.mapStyle{\n  position: absolute;\n  z-index: 1;\n  margin-top: 10px;\n  margin-left: 10px;\n}\n.map-container {\n  height: 100%;\n  width: 100%;\n  z-index: 10;\n  background: bisque;\n  z-index: 10;\n}\n</style>"]}]}