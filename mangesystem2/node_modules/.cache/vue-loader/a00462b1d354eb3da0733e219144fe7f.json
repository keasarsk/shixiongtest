{"remainingRequest":"/Users/kaesar/Documents/实验室相关/师兄毕设项目前后端/mangesystem/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kaesar/Documents/实验室相关/师兄毕设项目前后端/mangesystem/src/views/display/components/Map.vue?vue&type=style&index=0&id=72128b6c&scoped=true&lang=css&","dependencies":[{"path":"/Users/kaesar/Documents/实验室相关/师兄毕设项目前后端/mangesystem/src/views/display/components/Map.vue","mtime":1677668172063},{"path":"/Users/kaesar/Documents/实验室相关/师兄毕设项目前后端/mangesystem/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kaesar/Documents/实验室相关/师兄毕设项目前后端/mangesystem/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/kaesar/Documents/实验室相关/师兄毕设项目前后端/mangesystem/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/kaesar/Documents/实验室相关/师兄毕设项目前后端/mangesystem/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kaesar/Documents/实验室相关/师兄毕设项目前后端/mangesystem/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQojbWFwIHsNCiAgaGVpZ2h0OiAxMDAlOw0KICB3aWR0aDogMTAwJTsNCiAgei1pbmRleDogYXV0bzsNCiAgYmFja2dyb3VuZDogYmlzcXVlOw0KICAvKmJhY2tncm91bmQtY29sb3I6ICM0MDlFRkY7Ki8NCn0NCi5tYXBTdHlsZXsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICB6LWluZGV4OiAxOw0KICBtYXJnaW4tdG9wOiAxMHB4Ow0KICBtYXJnaW4tbGVmdDogMTBweDsNCn0NCi5tYXAtY29udGFpbmVyIHsNCiAgaGVpZ2h0OiAxMDAlOw0KICB3aWR0aDogMTAwJTsNCiAgei1pbmRleDogMTA7DQogIGJhY2tncm91bmQ6IGJpc3F1ZTsNCiAgei1pbmRleDogMTA7DQp9DQo="},{"version":3,"sources":["Map.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Map.vue","sourceRoot":"src/views/display/components","sourcesContent":["<template>\r\n\r\n  <div id=\"mapsetting\" :style=\"size\">\r\n  <!-- <div -->\r\n  <!-- <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.4.0/dist/leaflet.css\"/> -->\r\n\r\n    <!-- <el-radio-group class=\"mapStyle\" v-model=\"mapId\" @change=\"changeStyle\" size=\"mini\">\r\n      <el-radio-button label='mapbox/streets-v11' size=\"mini\" >平面地图</el-radio-button>\r\n      <el-radio-button label='mapbox/satellite-v9' size=\"mini\" >卫星地图</el-radio-button>\r\n      <el-radio-button label='mapbox/outdoors-v10' size=\"mini\" >户外地图</el-radio-button>\r\n    </el-radio-group> -->\r\n\r\n    <!-- <div id=\"map\"></div> -->\r\n    <div class=\"map-container\" id=\"map-container\"> </div>\r\n  </div>\r\n\r\n  \r\n\r\n</template>\r\n\r\n<script>\r\n\r\nlet map=null\r\nlet layer = null\r\nexport default {\r\n    components: { \r\n        //   datepicker \r\n    },\r\n    data(){\r\n        return{\r\n            map: null,\r\n            layers: null,\r\n            mapId: 'mapbox/streets-v11',\r\n            geoLocate:null,\r\n            userLocation:[],\r\n            canvasMarkers: [],\r\n            size: {\r\n              width: '100%',\r\n              height: '8.2rem',\r\n              background: 'whitesmoke',\r\n            },\r\n            \r\n            depotIcon: null,\r\n                userIcon: null,\r\n                uavIcon: null,\r\n        }\r\n    }, \r\n    mounted() {\r\n        // 创建地图层\r\n        this.map = this.$leaflet.createMap(\"map-container\", {\r\n            minZoom: 1,\r\n            maxZoom: 20,\r\n            zoomControl: false,\r\n            attributionControl: false,\r\n            //坐标系选择\r\n            crs: L.CRS.EPSG3857\r\n        }).fitWorld()\r\n\r\n        this.layers = this.$leaflet.createTileLayer(this.map, 'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {\r\n            // attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\r\n            maxZoom: 20,\r\n            id: this.mapId,\r\n            tileSize: 512,\r\n            zoomOffset: -1,\r\n            accessToken: 'pk.eyJ1IjoidHJhbnNjZW5kdHJlZSIsImEiOiJja3N6eHRiMzkxeXNzMm90Y2Rhd2JmbjNqIn0.bCRv7xB55jHSDwEF5y5DcA'\r\n        })\r\n        // this.map.setView([51.505, -0.09], 13);\r\n        this.$leaflet.zoomControl({ position: 'topright' }).addTo(this.map)\r\n        this.$leaflet.zoomAttribution(\r\n            {\r\n                position: 'bottomright',\r\n                prefix: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>'\r\n            }\r\n        )\r\n        // 定位\r\n        this.$leaflet.locate({ position: 'bottomright', initialZoomLevel: 15, setView: \"once\", flyTo: true}).addTo(this.map);\r\n        // this.map.on('click', e =>{\r\n        //   console.log(e)\r\n        // })\r\n        // 初始化Icon\r\n        this.iconInit()\r\n        this.queryLatlng()\r\n    },\r\n    methods: {\r\n        // icon init\r\n        async iconInit() {\r\n            this.userIcon = this.$leaflet.createIcon({\r\n                iconUrl: require(\"@/assets/icons/flyIcon/mobile.png\"),\r\n                iconSize: [36, 36]\r\n            })\r\n            this.depotIcon = this.$leaflet.createIcon({\r\n                iconUrl: require(\"@/assets/icons/flyIcon/depot.png\"),\r\n                iconSize: [36, 36]\r\n            })\r\n            this.uavIcon = this.$leaflet.createIcon({\r\n                iconUrl: require(\"@/assets/icons/flyIcon/uav48.png\"),\r\n                iconSize: [36, 36]\r\n            })\r\n            \r\n        },\r\n        // 地图样式改变\r\n        changeStyle() {\r\n            this.map.removeLayer(this.layers)\r\n            this.$leaflet.createTileLayer(this.map, 'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {\r\n                attribution: 'Map data &copy; wa href=\"https://www.openstreetmap.org/copyright\"wOpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\r\n                maxZoom: 20,\r\n                id: this.mapId,\r\n                tileSize: 512,\r\n                // zoomOffset 注释掉会出大问题\r\n                zoomOffset: -1,\r\n                accessToken: 'pk.eyJ1IjoidHJhbnNjZW5kdHJlZSIsImEiOiJja3N6eHRiMzkxeXNzMm90Y2Rhd2JmbjNqIn0.bCRv7xB55jHSDwEF5y5DcA'\r\n            })\r\n        },\r\n        // 获取坐标\r\n        queryLatlng(){\r\n          let latlng = {\r\n            lat: 39.08343208067558,\r\n            lng: 121.81061116978528\r\n          }\r\n          // console.log(latlng)\r\n          this.drawUav(latlng)\r\n        },\r\n        // 传入坐标,绘制无人机\r\n        drawUav(latlng){\r\n          \r\n          this.$leaflet.createMarker(latlng, { icon: this.uavIcon, title: \"无人机正在执行任务\" }).addTo(this.map)\r\n        }\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#map {\r\n  height: 100%;\r\n  width: 100%;\r\n  z-index: auto;\r\n  background: bisque;\r\n  /*background-color: #409EFF;*/\r\n}\r\n.mapStyle{\r\n  position: absolute;\r\n  z-index: 1;\r\n  margin-top: 10px;\r\n  margin-left: 10px;\r\n}\r\n.map-container {\r\n  height: 100%;\r\n  width: 100%;\r\n  z-index: 10;\r\n  background: bisque;\r\n  z-index: 10;\r\n}\r\n</style>"]}]}