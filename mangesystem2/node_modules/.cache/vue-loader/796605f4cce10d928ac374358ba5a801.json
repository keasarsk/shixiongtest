{"remainingRequest":"/Users/kaesar/Documents/实验室相关/师兄毕设项目前后端/mangesystem/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kaesar/Documents/实验室相关/师兄毕设项目前后端/mangesystem/src/views/display/components/Map.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kaesar/Documents/实验室相关/师兄毕设项目前后端/mangesystem/src/views/display/components/Map.vue","mtime":1677668172063},{"path":"/Users/kaesar/Documents/实验室相关/师兄毕设项目前后端/mangesystem/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kaesar/Documents/实验室相关/师兄毕设项目前后端/mangesystem/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/kaesar/Documents/实验室相关/师兄毕设项目前后端/mangesystem/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kaesar/Documents/实验室相关/师兄毕设项目前后端/mangesystem/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmxldCBtYXA9bnVsbA0KbGV0IGxheWVyID0gbnVsbA0KZXhwb3J0IGRlZmF1bHQgew0KICAgIGNvbXBvbmVudHM6IHsgDQogICAgICAgIC8vICAgZGF0ZXBpY2tlciANCiAgICB9LA0KICAgIGRhdGEoKXsNCiAgICAgICAgcmV0dXJuew0KICAgICAgICAgICAgbWFwOiBudWxsLA0KICAgICAgICAgICAgbGF5ZXJzOiBudWxsLA0KICAgICAgICAgICAgbWFwSWQ6ICdtYXBib3gvc3RyZWV0cy12MTEnLA0KICAgICAgICAgICAgZ2VvTG9jYXRlOm51bGwsDQogICAgICAgICAgICB1c2VyTG9jYXRpb246W10sDQogICAgICAgICAgICBjYW52YXNNYXJrZXJzOiBbXSwNCiAgICAgICAgICAgIHNpemU6IHsNCiAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJywNCiAgICAgICAgICAgICAgaGVpZ2h0OiAnOC4ycmVtJywNCiAgICAgICAgICAgICAgYmFja2dyb3VuZDogJ3doaXRlc21va2UnLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZGVwb3RJY29uOiBudWxsLA0KICAgICAgICAgICAgICAgIHVzZXJJY29uOiBudWxsLA0KICAgICAgICAgICAgICAgIHVhdkljb246IG51bGwsDQogICAgICAgIH0NCiAgICB9LCANCiAgICBtb3VudGVkKCkgew0KICAgICAgICAvLyDliJvlu7rlnLDlm77lsYINCiAgICAgICAgdGhpcy5tYXAgPSB0aGlzLiRsZWFmbGV0LmNyZWF0ZU1hcCgibWFwLWNvbnRhaW5lciIsIHsNCiAgICAgICAgICAgIG1pblpvb206IDEsDQogICAgICAgICAgICBtYXhab29tOiAyMCwNCiAgICAgICAgICAgIHpvb21Db250cm9sOiBmYWxzZSwNCiAgICAgICAgICAgIGF0dHJpYnV0aW9uQ29udHJvbDogZmFsc2UsDQogICAgICAgICAgICAvL+WdkOagh+ezu+mAieaLqQ0KICAgICAgICAgICAgY3JzOiBMLkNSUy5FUFNHMzg1Nw0KICAgICAgICB9KS5maXRXb3JsZCgpDQoNCiAgICAgICAgdGhpcy5sYXllcnMgPSB0aGlzLiRsZWFmbGV0LmNyZWF0ZVRpbGVMYXllcih0aGlzLm1hcCwgJ2h0dHBzOi8vYXBpLm1hcGJveC5jb20vc3R5bGVzL3YxL3tpZH0vdGlsZXMve3p9L3t4fS97eX0/YWNjZXNzX3Rva2VuPXthY2Nlc3NUb2tlbn0nLCB7DQogICAgICAgICAgICAvLyBhdHRyaWJ1dGlvbjogJ01hcCBkYXRhICZjb3B5OyA8YSBocmVmPSJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHQiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgSW1hZ2VyeSDCqSA8YSBocmVmPSJodHRwczovL3d3dy5tYXBib3guY29tLyI+TWFwYm94PC9hPicsDQogICAgICAgICAgICBtYXhab29tOiAyMCwNCiAgICAgICAgICAgIGlkOiB0aGlzLm1hcElkLA0KICAgICAgICAgICAgdGlsZVNpemU6IDUxMiwNCiAgICAgICAgICAgIHpvb21PZmZzZXQ6IC0xLA0KICAgICAgICAgICAgYWNjZXNzVG9rZW46ICdway5leUoxSWpvaWRISmhibk5qWlc1a2RISmxaU0lzSW1FaU9pSmphM042ZUhSaU16a3hlWE56TW05MFkyUmhkMkptYmpOcUluMC5iQ1J2N3hCNTVqSFNEd0VGNXk1RGNBJw0KICAgICAgICB9KQ0KICAgICAgICAvLyB0aGlzLm1hcC5zZXRWaWV3KFs1MS41MDUsIC0wLjA5XSwgMTMpOw0KICAgICAgICB0aGlzLiRsZWFmbGV0Lnpvb21Db250cm9sKHsgcG9zaXRpb246ICd0b3ByaWdodCcgfSkuYWRkVG8odGhpcy5tYXApDQogICAgICAgIHRoaXMuJGxlYWZsZXQuem9vbUF0dHJpYnV0aW9uKA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYm90dG9tcmlnaHQnLA0KICAgICAgICAgICAgICAgIHByZWZpeDogJ01hcCBkYXRhICZjb3B5OyA8YSBocmVmPSJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHQiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgSW1hZ2VyeSDCqSA8YSBocmVmPSJodHRwczovL3d3dy5tYXBib3guY29tLyI+TWFwYm94PC9hPicNCiAgICAgICAgICAgIH0NCiAgICAgICAgKQ0KICAgICAgICAvLyDlrprkvY0NCiAgICAgICAgdGhpcy4kbGVhZmxldC5sb2NhdGUoeyBwb3NpdGlvbjogJ2JvdHRvbXJpZ2h0JywgaW5pdGlhbFpvb21MZXZlbDogMTUsIHNldFZpZXc6ICJvbmNlIiwgZmx5VG86IHRydWV9KS5hZGRUbyh0aGlzLm1hcCk7DQogICAgICAgIC8vIHRoaXMubWFwLm9uKCdjbGljaycsIGUgPT57DQogICAgICAgIC8vICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgLy8gfSkNCiAgICAgICAgLy8g5Yid5aeL5YyWSWNvbg0KICAgICAgICB0aGlzLmljb25Jbml0KCkNCiAgICAgICAgdGhpcy5xdWVyeUxhdGxuZygpDQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIC8vIGljb24gaW5pdA0KICAgICAgICBhc3luYyBpY29uSW5pdCgpIHsNCiAgICAgICAgICAgIHRoaXMudXNlckljb24gPSB0aGlzLiRsZWFmbGV0LmNyZWF0ZUljb24oew0KICAgICAgICAgICAgICAgIGljb25Vcmw6IHJlcXVpcmUoIkAvYXNzZXRzL2ljb25zL2ZseUljb24vbW9iaWxlLnBuZyIpLA0KICAgICAgICAgICAgICAgIGljb25TaXplOiBbMzYsIDM2XQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHRoaXMuZGVwb3RJY29uID0gdGhpcy4kbGVhZmxldC5jcmVhdGVJY29uKHsNCiAgICAgICAgICAgICAgICBpY29uVXJsOiByZXF1aXJlKCJAL2Fzc2V0cy9pY29ucy9mbHlJY29uL2RlcG90LnBuZyIpLA0KICAgICAgICAgICAgICAgIGljb25TaXplOiBbMzYsIDM2XQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHRoaXMudWF2SWNvbiA9IHRoaXMuJGxlYWZsZXQuY3JlYXRlSWNvbih7DQogICAgICAgICAgICAgICAgaWNvblVybDogcmVxdWlyZSgiQC9hc3NldHMvaWNvbnMvZmx5SWNvbi91YXY0OC5wbmciKSwNCiAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzM2LCAzNl0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICANCiAgICAgICAgfSwNCiAgICAgICAgLy8g5Zyw5Zu+5qC35byP5pS55Y+YDQogICAgICAgIGNoYW5nZVN0eWxlKCkgew0KICAgICAgICAgICAgdGhpcy5tYXAucmVtb3ZlTGF5ZXIodGhpcy5sYXllcnMpDQogICAgICAgICAgICB0aGlzLiRsZWFmbGV0LmNyZWF0ZVRpbGVMYXllcih0aGlzLm1hcCwgJ2h0dHBzOi8vYXBpLm1hcGJveC5jb20vc3R5bGVzL3YxL3tpZH0vdGlsZXMve3p9L3t4fS97eX0/YWNjZXNzX3Rva2VuPXthY2Nlc3NUb2tlbn0nLCB7DQogICAgICAgICAgICAgICAgYXR0cmlidXRpb246ICdNYXAgZGF0YSAmY29weTsgd2EgaHJlZj0iaHR0cHM6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0IndPcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsIEltYWdlcnkgwqkgPGEgaHJlZj0iaHR0cHM6Ly93d3cubWFwYm94LmNvbS8iPk1hcGJveDwvYT4nLA0KICAgICAgICAgICAgICAgIG1heFpvb206IDIwLA0KICAgICAgICAgICAgICAgIGlkOiB0aGlzLm1hcElkLA0KICAgICAgICAgICAgICAgIHRpbGVTaXplOiA1MTIsDQogICAgICAgICAgICAgICAgLy8gem9vbU9mZnNldCDms6jph4rmjonkvJrlh7rlpKfpl67popgNCiAgICAgICAgICAgICAgICB6b29tT2Zmc2V0OiAtMSwNCiAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogJ3BrLmV5SjFJam9pZEhKaGJuTmpaVzVrZEhKbFpTSXNJbUVpT2lKamEzTjZlSFJpTXpreGVYTnpNbTkwWTJSaGQySm1iak5xSW4wLmJDUnY3eEI1NWpIU0R3RUY1eTVEY0EnDQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICAvLyDojrflj5blnZDmoIcNCiAgICAgICAgcXVlcnlMYXRsbmcoKXsNCiAgICAgICAgICBsZXQgbGF0bG5nID0gew0KICAgICAgICAgICAgbGF0OiAzOS4wODM0MzIwODA2NzU1OCwNCiAgICAgICAgICAgIGxuZzogMTIxLjgxMDYxMTE2OTc4NTI4DQogICAgICAgICAgfQ0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGxhdGxuZykNCiAgICAgICAgICB0aGlzLmRyYXdVYXYobGF0bG5nKQ0KICAgICAgICB9LA0KICAgICAgICAvLyDkvKDlhaXlnZDmoIcs57uY5Yi25peg5Lq65py6DQogICAgICAgIGRyYXdVYXYobGF0bG5nKXsNCiAgICAgICAgICANCiAgICAgICAgICB0aGlzLiRsZWFmbGV0LmNyZWF0ZU1hcmtlcihsYXRsbmcsIHsgaWNvbjogdGhpcy51YXZJY29uLCB0aXRsZTogIuaXoOS6uuacuuato+WcqOaJp+ihjOS7u+WKoSIgfSkuYWRkVG8odGhpcy5tYXApDQogICAgICAgIH0NCg0KICAgIH0NCn0NCg=="},{"version":3,"sources":["Map.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA","file":"Map.vue","sourceRoot":"src/views/display/components","sourcesContent":["<template>\r\n\r\n  <div id=\"mapsetting\" :style=\"size\">\r\n  <!-- <div -->\r\n  <!-- <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.4.0/dist/leaflet.css\"/> -->\r\n\r\n    <!-- <el-radio-group class=\"mapStyle\" v-model=\"mapId\" @change=\"changeStyle\" size=\"mini\">\r\n      <el-radio-button label='mapbox/streets-v11' size=\"mini\" >平面地图</el-radio-button>\r\n      <el-radio-button label='mapbox/satellite-v9' size=\"mini\" >卫星地图</el-radio-button>\r\n      <el-radio-button label='mapbox/outdoors-v10' size=\"mini\" >户外地图</el-radio-button>\r\n    </el-radio-group> -->\r\n\r\n    <!-- <div id=\"map\"></div> -->\r\n    <div class=\"map-container\" id=\"map-container\"> </div>\r\n  </div>\r\n\r\n  \r\n\r\n</template>\r\n\r\n<script>\r\n\r\nlet map=null\r\nlet layer = null\r\nexport default {\r\n    components: { \r\n        //   datepicker \r\n    },\r\n    data(){\r\n        return{\r\n            map: null,\r\n            layers: null,\r\n            mapId: 'mapbox/streets-v11',\r\n            geoLocate:null,\r\n            userLocation:[],\r\n            canvasMarkers: [],\r\n            size: {\r\n              width: '100%',\r\n              height: '8.2rem',\r\n              background: 'whitesmoke',\r\n            },\r\n            \r\n            depotIcon: null,\r\n                userIcon: null,\r\n                uavIcon: null,\r\n        }\r\n    }, \r\n    mounted() {\r\n        // 创建地图层\r\n        this.map = this.$leaflet.createMap(\"map-container\", {\r\n            minZoom: 1,\r\n            maxZoom: 20,\r\n            zoomControl: false,\r\n            attributionControl: false,\r\n            //坐标系选择\r\n            crs: L.CRS.EPSG3857\r\n        }).fitWorld()\r\n\r\n        this.layers = this.$leaflet.createTileLayer(this.map, 'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {\r\n            // attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\r\n            maxZoom: 20,\r\n            id: this.mapId,\r\n            tileSize: 512,\r\n            zoomOffset: -1,\r\n            accessToken: 'pk.eyJ1IjoidHJhbnNjZW5kdHJlZSIsImEiOiJja3N6eHRiMzkxeXNzMm90Y2Rhd2JmbjNqIn0.bCRv7xB55jHSDwEF5y5DcA'\r\n        })\r\n        // this.map.setView([51.505, -0.09], 13);\r\n        this.$leaflet.zoomControl({ position: 'topright' }).addTo(this.map)\r\n        this.$leaflet.zoomAttribution(\r\n            {\r\n                position: 'bottomright',\r\n                prefix: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>'\r\n            }\r\n        )\r\n        // 定位\r\n        this.$leaflet.locate({ position: 'bottomright', initialZoomLevel: 15, setView: \"once\", flyTo: true}).addTo(this.map);\r\n        // this.map.on('click', e =>{\r\n        //   console.log(e)\r\n        // })\r\n        // 初始化Icon\r\n        this.iconInit()\r\n        this.queryLatlng()\r\n    },\r\n    methods: {\r\n        // icon init\r\n        async iconInit() {\r\n            this.userIcon = this.$leaflet.createIcon({\r\n                iconUrl: require(\"@/assets/icons/flyIcon/mobile.png\"),\r\n                iconSize: [36, 36]\r\n            })\r\n            this.depotIcon = this.$leaflet.createIcon({\r\n                iconUrl: require(\"@/assets/icons/flyIcon/depot.png\"),\r\n                iconSize: [36, 36]\r\n            })\r\n            this.uavIcon = this.$leaflet.createIcon({\r\n                iconUrl: require(\"@/assets/icons/flyIcon/uav48.png\"),\r\n                iconSize: [36, 36]\r\n            })\r\n            \r\n        },\r\n        // 地图样式改变\r\n        changeStyle() {\r\n            this.map.removeLayer(this.layers)\r\n            this.$leaflet.createTileLayer(this.map, 'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {\r\n                attribution: 'Map data &copy; wa href=\"https://www.openstreetmap.org/copyright\"wOpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\r\n                maxZoom: 20,\r\n                id: this.mapId,\r\n                tileSize: 512,\r\n                // zoomOffset 注释掉会出大问题\r\n                zoomOffset: -1,\r\n                accessToken: 'pk.eyJ1IjoidHJhbnNjZW5kdHJlZSIsImEiOiJja3N6eHRiMzkxeXNzMm90Y2Rhd2JmbjNqIn0.bCRv7xB55jHSDwEF5y5DcA'\r\n            })\r\n        },\r\n        // 获取坐标\r\n        queryLatlng(){\r\n          let latlng = {\r\n            lat: 39.08343208067558,\r\n            lng: 121.81061116978528\r\n          }\r\n          // console.log(latlng)\r\n          this.drawUav(latlng)\r\n        },\r\n        // 传入坐标,绘制无人机\r\n        drawUav(latlng){\r\n          \r\n          this.$leaflet.createMarker(latlng, { icon: this.uavIcon, title: \"无人机正在执行任务\" }).addTo(this.map)\r\n        }\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#map {\r\n  height: 100%;\r\n  width: 100%;\r\n  z-index: auto;\r\n  background: bisque;\r\n  /*background-color: #409EFF;*/\r\n}\r\n.mapStyle{\r\n  position: absolute;\r\n  z-index: 1;\r\n  margin-top: 10px;\r\n  margin-left: 10px;\r\n}\r\n.map-container {\r\n  height: 100%;\r\n  width: 100%;\r\n  z-index: 10;\r\n  background: bisque;\r\n  z-index: 10;\r\n}\r\n</style>"]}]}