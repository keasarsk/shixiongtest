{"remainingRequest":"/home/shaokai/shixiongProject/shixiongtest/mangesystem2/node_modules/babel-loader/lib/index.js!/home/shaokai/shixiongProject/shixiongtest/mangesystem2/node_modules/eslint-loader/index.js??ref--13-0!/home/shaokai/shixiongProject/shixiongtest/mangesystem2/src/plugins/download.js","dependencies":[{"path":"/home/shaokai/shixiongProject/shixiongtest/mangesystem2/src/plugins/download.js","mtime":1677684504071},{"path":"/home/shaokai/shixiongProject/shixiongtest/mangesystem2/babel.config.js","mtime":1677684502367},{"path":"/home/shaokai/shixiongProject/shixiongtest/mangesystem2/node_modules/cache-loader/dist/cjs.js","mtime":1677684502691},{"path":"/home/shaokai/shixiongProject/shixiongtest/mangesystem2/node_modules/babel-loader/lib/index.js","mtime":1677684502627},{"path":"/home/shaokai/shixiongProject/shixiongtest/mangesystem2/node_modules/eslint-loader/index.js","mtime":1677684503219}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvaG9tZS9zaGFva2FpL3NoaXhpb25nUHJvamVjdC9zaGl4aW9uZ3Rlc3QvbWFuZ2VzeXN0ZW0yL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwp2YXIgX3JlZ2VuZXJhdG9yUnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi9ob21lL3NoYW9rYWkvc2hpeGlvbmdQcm9qZWN0L3NoaXhpb25ndGVzdC9tYW5nZXN5c3RlbTIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvcmVnZW5lcmF0b3JSdW50aW1lLmpzIikpOwp2YXIgX2FzeW5jVG9HZW5lcmF0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIvaG9tZS9zaGFva2FpL3NoaXhpb25nUHJvamVjdC9zaGl4aW9uZ3Rlc3QvbWFuZ2VzeXN0ZW0yL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IuanMiKSk7CnZhciBfYXhpb3MgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImF4aW9zIikpOwp2YXIgX2VsZW1lbnRVaSA9IHJlcXVpcmUoImVsZW1lbnQtdWkiKTsKdmFyIF9maWxlU2F2ZXIgPSByZXF1aXJlKCJmaWxlLXNhdmVyIik7CnZhciBfYXV0aCA9IHJlcXVpcmUoIkAvdXRpbHMvYXV0aCIpOwp2YXIgX2Vycm9yQ29kZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC91dGlscy9lcnJvckNvZGUiKSk7CnZhciBfdWF2ID0gcmVxdWlyZSgiQC91dGlscy91YXYiKTsKdmFyIGJhc2VVUkwgPSBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJOwp2YXIgX2RlZmF1bHQgPSB7CiAgemlwOiBmdW5jdGlvbiB6aXAodXJsLCBuYW1lKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdmFyIHVybCA9IGJhc2VVUkwgKyB1cmw7CiAgICAoMCwgX2F4aW9zLmRlZmF1bHQpKHsKICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgdXJsOiB1cmwsCiAgICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InLAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyAoMCwgX2F1dGguZ2V0VG9rZW4pKCkKICAgICAgfQogICAgfSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyLmRlZmF1bHQpKCAvKiNfX1BVUkVfXyovKDAsIF9yZWdlbmVyYXRvclJ1bnRpbWUyLmRlZmF1bHQpKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlcykgewogICAgICAgIHZhciBpc0xvZ2luLCBibG9iOwogICAgICAgIHJldHVybiAoMCwgX3JlZ2VuZXJhdG9yUnVudGltZTIuZGVmYXVsdCkoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuICgwLCBfdWF2LmJsb2JWYWxpZGF0ZSkocmVzLmRhdGEpOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgaXNMb2dpbiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgaWYgKGlzTG9naW4pIHsKICAgICAgICAgICAgICAgIGJsb2IgPSBuZXcgQmxvYihbcmVzLmRhdGFdLCB7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICdhcHBsaWNhdGlvbi96aXAnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF90aGlzLnNhdmVBcyhibG9iLCBuYW1lKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgX3RoaXMucHJpbnRFcnJNc2cocmVzLmRhdGEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCkpOwogIH0sCiAgc2F2ZUFzOiBmdW5jdGlvbiBzYXZlQXModGV4dCwgbmFtZSwgb3B0cykgewogICAgKDAsIF9maWxlU2F2ZXIuc2F2ZUFzKSh0ZXh0LCBuYW1lLCBvcHRzKTsKICB9LAogIHByaW50RXJyTXNnOiBmdW5jdGlvbiBwcmludEVyck1zZyhkYXRhKSB7CiAgICByZXR1cm4gKDAsIF9hc3luY1RvR2VuZXJhdG9yMi5kZWZhdWx0KSggLyojX19QVVJFX18qLygwLCBfcmVnZW5lcmF0b3JSdW50aW1lMi5kZWZhdWx0KSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciByZXNUZXh0LCByc3BPYmosIGVyck1zZzsKICAgICAgcmV0dXJuICgwLCBfcmVnZW5lcmF0b3JSdW50aW1lMi5kZWZhdWx0KSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gZGF0YS50ZXh0KCk7CiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJlc1RleHQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgcnNwT2JqID0gSlNPTi5wYXJzZShyZXNUZXh0KTsKICAgICAgICAgICAgZXJyTXNnID0gX2Vycm9yQ29kZS5kZWZhdWx0W3JzcE9iai5jb2RlXSB8fCByc3BPYmoubXNnIHx8IF9lcnJvckNvZGUuZGVmYXVsdFsnZGVmYXVsdCddOwogICAgICAgICAgICBfZWxlbWVudFVpLk1lc3NhZ2UuZXJyb3IoZXJyTXNnKTsKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKCk7CiAgfQp9OwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"names":["_axios","_interopRequireDefault","require","_elementUi","_fileSaver","_auth","_errorCode","_uav","baseURL","process","env","VUE_APP_BASE_API","_default","zip","url","name","_this","axios","method","responseType","headers","getToken","then","_ref","_asyncToGenerator2","default","_regeneratorRuntime2","mark","_callee","res","isLogin","blob","wrap","_callee$","_context","prev","next","blobValidate","data","sent","Blob","type","saveAs","printErrMsg","stop","_x","apply","arguments","text","opts","_callee2","resText","rspObj","errMsg","_callee2$","_context2","JSON","parse","errorCode","code","msg","Message","error","exports"],"sources":["/home/shaokai/shixiongProject/shixiongtest/mangesystem2/src/plugins/download.js"],"sourcesContent":["import axios from 'axios'\nimport { Message } from 'element-ui'\nimport { saveAs } from 'file-saver'\nimport { getToken } from '@/utils/auth'\nimport errorCode from '@/utils/errorCode'\nimport { blobValidate } from \"@/utils/uav\";\n\nconst baseURL = process.env.VUE_APP_BASE_API\n\nexport default {\n  zip(url, name) {\n    var url = baseURL + url\n    axios({\n      method: 'get',\n      url: url,\n      responseType: 'blob',\n      headers: { 'Authorization': 'Bearer ' + getToken() }\n    }).then(async (res) => {\n      const isLogin = await blobValidate(res.data);\n      if (isLogin) {\n        const blob = new Blob([res.data], { type: 'application/zip' })\n        this.saveAs(blob, name)\n      } else {\n        this.printErrMsg(res.data);\n      }\n    })\n  },\n  saveAs(text, name, opts) {\n    saveAs(text, name, opts);\n  },\n  async printErrMsg(data) {\n    const resText = await data.text();\n    const rspObj = JSON.parse(resText);\n    const errMsg = errorCode[rspObj.code] || rspObj.msg || errorCode['default']\n    Message.error(errMsg);\n  }\n}\n\n"],"mappings":"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"}]}